- name: Configure the Droplet
  hosts: all
  become: true
  tasks:

    - name: Install The Packages
      ansible.builtin.apt:
        update_cache: true
        pkg:
          - docker.io
          - docker-compose

    - name: Simpler Copy
      ansible.builtin.copy:
        src: config_files/
        dest: /opt
        mode: '0644'

    - name: Docker Compose Down
      community.docker.docker_compose:
        state: absent
        project_src: /opt

    - name: Docker Compose Up
      community.docker.docker_compose:
        remove_orphans: true
        project_src: /opt
